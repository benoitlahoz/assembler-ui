/* Styles pour les icônes d'édition Leaflet */

/* Base styles - Mobile first (larger touch targets) */
.leaflet-editing-icon {
  margin-left: -8px !important;
  margin-top: -8px !important;
  pointer-events: auto !important;
  cursor: move !important;
  /* Remove transition during drag for immediate response */
}

.leaflet-editing-icon div {
  width: 16px !important;
  height: 16px !important;
  border-radius: 50% !important;
  box-shadow:
    0 0 0 2px rgba(0, 0, 0, 0.15),
    0 2px 4px rgba(0, 0, 0, 0.1);
  /* Transitions only for non-position changes */
  transition: box-shadow 0.2s ease;
}

/* First point marker - larger on mobile */
.leaflet-editing-icon-first {
  margin-left: -10px !important;
  margin-top: -10px !important;
  cursor: pointer !important;
  z-index: 1000 !important;
}

.leaflet-editing-icon-first div {
  width: 20px !important;
  height: 20px !important;
  border-radius: 50% !important;
  box-shadow:
    0 0 0 3px rgba(51, 136, 255, 0.3),
    0 2px 6px rgba(0, 0, 0, 0.15);
}

/* Midpoint markers - more visible with stronger styling */
.leaflet-editing-icon-midpoint {
  margin-left: -7px !important;
  margin-top: -7px !important;
  pointer-events: auto !important;
  cursor: copy !important;
}

.leaflet-editing-icon-midpoint div {
  width: 14px !important;
  height: 14px !important;
  border-radius: 50% !important;
  opacity: 0.9 !important;
  background: #fff !important;
  border: 2px solid #3388ff !important;
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.8),
    0 2px 6px rgba(0, 0, 0, 0.25) !important;
  transition: box-shadow 0.15s ease, opacity 0.15s ease;
}

/* Center marker for dragging entire shape */
.leaflet-editing-icon-center {
  margin-left: -8px !important;
  margin-top: -8px !important;
  pointer-events: auto !important;
  cursor: move !important;
}

.leaflet-editing-icon-center div {
  width: 16px !important;
  height: 16px !important;
  border-radius: 50% !important;
  box-shadow:
    0 0 0 2px rgba(255, 136, 0, 0.3),
    0 2px 6px rgba(0, 0, 0, 0.15);
  transition: box-shadow 0.2s ease;
}

/* Desktop: smaller default sizes with hover effects */
@media (hover: hover) and (pointer: fine) {
  .leaflet-editing-icon {
    margin-left: -4px !important;
    margin-top: -4px !important;
  }

  .leaflet-editing-icon div {
    width: 8px !important;
    height: 8px !important;
  }

  .leaflet-editing-icon:hover div {
    width: 14px !important;
    height: 14px !important;
    box-shadow:
      0 0 0 3px rgba(51, 136, 255, 0.3),
      0 2px 6px rgba(0, 0, 0, 0.2);
  }

  .leaflet-editing-icon-first {
    margin-left: -6px !important;
    margin-top: -6px !important;
  }

  .leaflet-editing-icon-first div {
    width: 12px !important;
    height: 12px !important;
  }

  .leaflet-editing-icon-first:hover div {
    width: 18px !important;
    height: 18px !important;
    transform: scale(1.2);
    box-shadow:
      0 0 0 4px rgba(51, 136, 255, 0.5),
      0 3px 8px rgba(0, 0, 0, 0.25);
  }

  .leaflet-editing-icon-midpoint div {
    width: 8px !important;
    height: 8px !important;
    opacity: 0.8 !important;
  }

  .leaflet-editing-icon-midpoint:hover div {
    width: 12px !important;
    height: 12px !important;
    opacity: 1 !important;
    box-shadow:
      0 0 0 2px rgba(255, 255, 255, 0.9),
      0 0 0 4px rgba(51, 136, 255, 0.5),
      0 2px 6px rgba(0, 0, 0, 0.3) !important;
  }

  .leaflet-editing-icon-center div {
    width: 10px !important;
    height: 10px !important;
  }

  .leaflet-editing-icon-center:hover div {
    width: 16px !important;
    height: 16px !important;
    box-shadow:
      0 0 0 3px rgba(255, 136, 0, 0.5),
      0 3px 8px rgba(0, 0, 0, 0.25);
  }
}

/* Active/dragging state - remove transitions for immediate response */
.leaflet-editing-icon.leaflet-dragging,
.leaflet-editing-icon-first.leaflet-dragging,
.leaflet-editing-icon-center.leaflet-dragging,
.leaflet-editing-icon-midpoint.leaflet-dragging {
  transition: none !important;
}

.leaflet-editing-icon.leaflet-dragging div,
.leaflet-editing-icon-first.leaflet-dragging div,
.leaflet-editing-icon-center.leaflet-dragging div,
.leaflet-editing-icon-midpoint.leaflet-dragging div {
  transition: none !important;
  box-shadow:
    0 0 0 4px rgba(51, 136, 255, 0.6),
    0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* Ensure smooth transitions on touch devices */
@media (hover: none) and (pointer: coarse) {
  .leaflet-editing-icon div,
  .leaflet-editing-icon-first div,
  .leaflet-editing-icon-midpoint div,
  .leaflet-editing-icon-center div {
    transition: box-shadow 0.15s ease, opacity 0.15s ease;
  }
  
  /* No transition during drag on touch devices */
  .leaflet-editing-icon.leaflet-dragging,
  .leaflet-editing-icon-first.leaflet-dragging,
  .leaflet-editing-icon-center.leaflet-dragging,
  .leaflet-editing-icon-midpoint.leaflet-dragging {
    transition: none !important;
  }
  
  .leaflet-editing-icon.leaflet-dragging div,
  .leaflet-editing-icon-first.leaflet-dragging div,
  .leaflet-editing-icon-center.leaflet-dragging div,
  .leaflet-editing-icon-midpoint.leaflet-dragging div {
    transition: none !important;
  }
}
